<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Distributed Environment Setup · LikelihoodBasedProfileWiseAnalysis.jl</title><meta name="title" content="Distributed Environment Setup · LikelihoodBasedProfileWiseAnalysis.jl"/><meta property="og:title" content="Distributed Environment Setup · LikelihoodBasedProfileWiseAnalysis.jl"/><meta property="twitter:title" content="Distributed Environment Setup · LikelihoodBasedProfileWiseAnalysis.jl"/><meta name="description" content="Documentation for LikelihoodBasedProfileWiseAnalysis.jl."/><meta property="og:description" content="Documentation for LikelihoodBasedProfileWiseAnalysis.jl."/><meta property="twitter:description" content="Documentation for LikelihoodBasedProfileWiseAnalysis.jl."/><meta property="og:url" content="https://JoelTrent.github.io/LikelihoodBasedProfileWiseAnalysis.jl/examples/"/><meta property="twitter:url" content="https://JoelTrent.github.io/LikelihoodBasedProfileWiseAnalysis.jl/examples/"/><link rel="canonical" href="https://JoelTrent.github.io/LikelihoodBasedProfileWiseAnalysis.jl/examples/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LikelihoodBasedProfileWiseAnalysis.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Background</span><ul><li><a class="tocitem" href="../workflow_motivation/">Motivation</a></li><li><a class="tocitem" href="../workflow_formulation/">Formulation</a></li></ul></li><li><span class="tocitem">User Interface</span><ul><li><a class="tocitem" href="../user_interface/initialisation/">Initialisation</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Parameter Profiles and Samples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../user_interface/profiles_and_samples/profile_structs/">Structs and Profile Types</a></li><li><a class="tocitem" href="../user_interface/profiles_and_samples/univariate/">Univariate Profiles</a></li><li><a class="tocitem" href="../user_interface/profiles_and_samples/bivariate/">Bivariate Profiles</a></li><li><a class="tocitem" href="../user_interface/profiles_and_samples/dimensional/">Dimensional Samples</a></li></ul></li><li><a class="tocitem" href="../user_interface/predictions/">Predictions</a></li><li><a class="tocitem" href="../user_interface/plots/">Plots</a></li><li><a class="tocitem" href="../user_interface/saving_and_loading/">Saving and Loading LikelihoodModels</a></li><li><a class="tocitem" href="../user_interface/timing_and_profiling/">Timing and Profiling</a></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">Simulated Coverage Checks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../user_interface/coverage/univariate_intervals/">Parameter Confidence Intervals</a></li><li><a class="tocitem" href="../user_interface/coverage/bivariate_boundaries/">Bivariate Parameter Confidence Boundaries</a></li><li><a class="tocitem" href="../user_interface/coverage/predictions_and_realisations/">Predictions and Realisations</a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Distributed Environment Setup</a></li><li><a class="tocitem" href="logistic/">Logistic Model</a></li><li><a class="tocitem" href="lotka-volterra/">Lotka-Volterra Model</a></li><li><a class="tocitem" href="two-species_logistic/">Two-Species Logistic Model</a></li><li><a class="tocitem" href="binomial_normal_approximation/">Gaussian Approximation of a Binomial Distribution</a></li><li><a class="tocitem" href="logistic_timing_estimates/">Function Evaluation Timing - Logistic Model</a></li></ul></li><li><span class="tocitem">Internal Library</span><ul><li><a class="tocitem" href="../internal_library/common/">Common Functions</a></li><li><a class="tocitem" href="../internal_library/initialisation/">Initialisation Internal</a></li><li><a class="tocitem" href="../internal_library/ellipse_likelihood/">Ellipse Functions</a></li><li><a class="tocitem" href="../internal_library/univariate/">Univariate Functions</a></li><li><a class="tocitem" href="../internal_library/bivariate/">Bivariate Functions</a></li><li><a class="tocitem" href="../internal_library/dimensional/">Dimensional Functions</a></li><li><a class="tocitem" href="../internal_library/predictions/">Prediction Functions</a></li><li><a class="tocitem" href="../internal_library/coverage/">Coverage Functions</a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Distributed Environment Setup</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Distributed Environment Setup</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JoelTrent/LikelihoodBasedProfileWiseAnalysis.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JoelTrent/LikelihoodBasedProfileWiseAnalysis.jl/blob/main/docs/src/examples/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Distributed-Environment-Setup"><a class="docs-heading-anchor" href="#Distributed-Environment-Setup">Distributed Environment Setup</a><a id="Distributed-Environment-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Distributed-Environment-Setup" title="Permalink"></a></h1><p>This package is designed to be run in a distributed computing environment (see <a href="https://docs.julialang.org/en/v1/stdlib/Distributed/">Distributed.jl</a>), meaning that the evaluation of profiles can be evaluated in parallel. This is particularly important when running coverage simulations. Many of the methods also work using a multi-threaded approach, albeit often parallelised in different locations</p><div class="admonition is-success"><header class="admonition-header">Recommended number of workers</header><div class="admonition-body"><p>The number of workers to use is recommended to be one or two less than the number of local threads (typically double the number of cores on a given CPU) on your CPU. This is because 1 worker already exists as the master worker and for most efficient distributed computing we want each worker to work on a distinct CPU thread. Furthermore, if you wish to use your computer at the same time as a simulation is running, we recommend that at least two threads are left available for other tasks.</p></div></div><p>We first allocate a number of workers for our simulation, which each use the minimum amount of threads (appears to be 2-3 when testing). If we don&#39;t set the <code>JULIA_NUM_THREADS</code> environment variable to <code>1</code> then every worker will be initialised with the default number of threads, <code>Threads.nthreads()</code>, which can cause large slowdowns.</p><pre><code class="language-julia hljs">using Distributed
addprocs(Threads.nthreads()-2, env=[&quot;JULIA_NUM_THREADS&quot;=&gt;&quot;1&quot;]) # the number of parallel workers to use - on the author&#39;s system Threads.nthreads() returns 10
# addprocs(8, env=[&quot;JULIA_NUM_THREADS&quot;=&gt;&quot;1&quot;]) # add 8 workers - total number of workers will be 9</code></pre><p>We can now check how many workers are allocated.</p><pre><code class="language-julia hljs">nprocs() # use to check the total number of worker processes allocated
workers() # the ids of the allocated workers
# Threads.nthreads() # the number of execution threads allocated to Julia at startup</code></pre><p>We import our package with the annotation <code>@everywhere</code>, letting Julia know that we wish to load the package on all allocated workers.</p><div class="admonition is-warning"><header class="admonition-header">Use of `@everywhere`</header><div class="admonition-body"><p>If <code>@everywhere</code> is not used at the beginning of the package import, then the package <code>LikelihoodBasedProfileWiseAnalysis</code> is only loaded onto the master worker&#39;s environment and cannot be seen by the other workers we wish to parallelise the simulation on. Similarly, any other functions that need to be loaded onto all workers, such as those that define the log-likelihood function, also need to have the annotation <code>@everywhere</code>. Resultantly, Julia will throw an error if  <code>nprocs()&gt;1</code>. However, an error won&#39;t be thrown if we haven&#39;t added any worker processes (if <code>nprocs()==1</code>) using the above multiprocessing arguments (this package can run on a single thread).</p></div></div><pre><code class="language-julia hljs">@everywhere using LikelihoodBasedProfileWiseAnalysis</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../user_interface/coverage/predictions_and_realisations/">« Predictions and Realisations</a><a class="docs-footer-nextpage" href="logistic/">Logistic Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Monday 28 October 2024 04:46">Monday 28 October 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
